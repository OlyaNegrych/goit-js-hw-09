{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAUC,SAASC,cAAc,SACjCC,EAAWF,SAASC,cAAc,kBAClCE,EAAUH,SAASC,cAAc,iBACjCG,EAAYJ,SAASC,cAAc,mBACzC,IAAII,EAAa,KAQjB,SAASC,EAAcC,EAAUC,GAC/B,MAAMC,EAAgBC,KAAKC,SAAW,GAEtCN,EAAaO,aAAY,KACvB,MAAMC,EAAYX,EAASY,MAAQX,EAAQW,MACrCC,EAAUR,EAAW,EAE3B,GAAIA,IAAaH,EAAUU,MAK3B,OAAO,IAAIE,SAAQ,CAACC,EAASC,KACvBT,GACFQ,EAAQ,CAACE,SAAUJ,EAASP,MAAOK,IAEnCK,EAAO,CAAEC,SAAUJ,EAASP,MAAOK,IAErCN,GAAY,IACXC,GAXDY,cAAcf,MAbpBN,EAAQsB,iBAAiB,UAAUC,IACjCA,EAAMC,iBACNjB,EAJa,EAIWJ,EAASY,UA0BnCR,EAAc,EAAG,KAAKkB,MAEtB,UAAqBL,SAAAM,EAAQjB,MAAEA,IAC7BkB,EAAA7B,GAAS8B,OAAOC,QAAQ,uBAAqBH,QAAiBjB,UAH1BqB,OAMtC,UAAmBV,SAAAW,EAAQtB,MAAEA,IAC3BkB,EAAA7B,GAAS8B,OAAOI,QAAQ,sBAAoBD,QAAiBtB","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst formRef = document.querySelector('.form');\nconst delayRef = document.querySelector('[name=\"delay\"]');\nconst stepRef = document.querySelector('[name=\"step\"]');\nconst amountRef = document.querySelector('[name=\"amount\"]');\nlet intervalId = null;\nlet position = 1;\n\nformRef.addEventListener('submit', event => {\n  event.preventDefault();\n  createPromise(position, delayRef.value);\n});\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  intervalId = setInterval(() => {\n    const delayNumb = delayRef.value + stepRef.value;\n    const counter = position + 1;\n\n    if (position === amountRef.value) {\n      clearInterval(intervalId);\n      return;\n    }\n\n    return new Promise((resolve, reject) => {\n      if (shouldResolve) {\n        resolve({position: counter, delay: delayNumb});\n      } \n        reject({ position: counter, delay: delayNumb });\n  \n      position += 1;\n    }, delay);\n  });\n}\n\ncreatePromise(2, 500).then(onSuccess).catch(onError);\n\nfunction onSuccess({ position, delay }) {\n  Notiflix.Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n}\n\nfunction onError({ position, delay }) {\n  Notiflix.Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n}\n\n// const makeOrder = () => {\n//   const DELAY = 1000;\n\n//   return new Promise((resolve, reject) => {\n//     const passed = Math.random() > 0.5;\n\n//     setTimeout(() => {\n//       if (passed) {\n//         resolve({ position: 1, delay: DELAY});\n//       }\n//       reject({ position: 2, delay: DELAY});\n//     }, DELAY);\n//   })\n// }\n\n// makeOrder().then(onSuccess).catch(onError);\n\n// function onSuccess({ position, delay }) {\n//   Notiflix.Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n// }\n\n// function onError({ position, delay }) {\n//  Notiflix.Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n// }\n\n"],"names":["$eWCmQ","parcelRequire","$47d4ff9957288465$var$formRef","document","querySelector","$47d4ff9957288465$var$delayRef","$47d4ff9957288465$var$stepRef","$47d4ff9957288465$var$amountRef","$47d4ff9957288465$var$intervalId","$47d4ff9957288465$var$createPromise","position1","delay","shouldResolve","Math","random","setInterval","delayNumb","value","counter","Promise","resolve","reject","position","clearInterval","addEventListener","event","preventDefault","then","position2","$parcel$interopDefault","Notify","success","catch","position3","failure"],"version":3,"file":"03-promises.c19240be.js.map"}